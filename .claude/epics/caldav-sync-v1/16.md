---
name: Extract CalDAV XML templates to constants
status: open
created: 2026-02-12T00:23:37Z
updated: 2026-02-12T00:28:04Z
github: https://github.com/josecoelho/obsidian-tasks-caldav/issues/16
depends_on: []
parallel: true
conflicts_with: []
---

# Task: Extract CalDAV XML templates to constants

## Description
Extract inline XML strings from `calDAVClientDirect.ts` into named constants in a separate file. The XML bodies for PROPFIND and REPORT requests are currently embedded in method bodies, making them hard to read. Move them to string constants (not Mustache — the templates have no variables).

## Acceptance Criteria
- [ ] XML request bodies extracted from `calDAVClientDirect.ts` into `src/caldav/templates.ts`
- [ ] Named constants for: PROPFIND_PRINCIPAL, PROPFIND_CALENDAR_HOME, PROPFIND_CALENDARS, REPORT_VTODOS, and any others
- [ ] `calDAVClientDirect.ts` imports and uses the constants
- [ ] No behavioral change — existing CalDAV client tests still pass
- [ ] Inline XML strings removed from method bodies

## Technical Details
- **New file:** `src/caldav/templates.ts` — exported string constants
- **Modified file:** `src/caldav/calDAVClientDirect.ts` — replace inline XML with imports
- **Existing test files:** `src/caldav/calDAVClientDirect.test.ts` — should pass unchanged
- **Lines to extract from calDAVClientDirect.ts:** ~73-78, ~93-98, ~150-155, ~226-233, ~309-320

## Dependencies
- [ ] None — standalone refactor

## Effort Estimate
- Size: XS
- Hours: 1-2
- Parallel: true (independent of all other tasks)
